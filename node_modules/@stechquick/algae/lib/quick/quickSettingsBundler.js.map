{"version":3,"file":"quickSettingsBundler.js","sourceRoot":"","sources":["../../src/quick/quickSettingsBundler.ts"],"names":[],"mappings":"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","sourcesContent":["import * as fs from \"fs\";\nimport path from \"path\";\nimport { tryGetContents } from \"../helpers/fileHelper\";\nimport { IntegrationsHelper } from \"../helpers/integrationsHelper\";\nimport { objectKeys } from \"../helpers/objectHelper\";\nimport { QJsonParser } from \"../helpers/qJsonParser\";\nimport { StringHelper } from \"../helpers/stringHelper\";\nimport { IInfo, IPlateauUIObject, ISettings, ISettingsIAM, ISettingsIAMV2 } from \"./IPlateauUI\";\nimport { QAnimationTemplate } from \"./QAnimationTemplate\";\nconst fsPromises = fs.promises;\n\nexport interface IQuickSettingsBundleYamlParser {\n    load<TObject extends object>(yamlContent: string): TObject;\n}\nexport interface IBundleContainer {\n    yaml: IQuickSettingsBundleYamlParser;\n}\n\nexport class QuickSettingsBundler {\n\n    public async bundleSettings(distFolder: string, bundleContainer: IBundleContainer) {\n        // DeleteFolder(\"./dist\"); //deletes dist folder of project\n        // Logger.log({ message: Chalk.create(\"green.bold\", \"Folders copying...\"), timeFormat: \"datetime\" });\n        // CopyFolder(\"./node_modules/@stechquick/qui/dist\", \"./dist\", [\"build\"]); // copies /node_modules/@stechquick/qui/dist folder to dist\n        const settingsPath = path.join(distFolder, \"/client\", \"/settings/settings.yaml\");\n        const localProxyPath = path.join(distFolder, \"/client\", \"/settings/localProxy.yaml\");\n        const assetListPath = path.join(distFolder, \"/client\", \"/static/css/assetList.yaml\");\n\n        const settingsContent = await fsPromises.readFile(settingsPath, { encoding: (\"utf-8\" as BufferEncoding) }); // reads settings.yaml\n        const localProxyContent = await tryGetContents(localProxyPath); // reads localProxy.yaml\n        const assetListContent = fs.existsSync(assetListPath) ? await fsPromises.readFile(assetListPath, { encoding: \"utf-8\" }) : undefined;\n\n        const settings = bundleContainer.yaml.load<Record<string, any>>(settingsContent); // converts yaml file content to js\n        const localProxy = localProxyContent ? bundleContainer.yaml.load<Record<string, any>>(localProxyContent) : undefined; // converts yaml file content to js\n        const assetList = assetListContent ? bundleContainer.yaml.load<Record<string, any>>(assetListContent) : undefined;\n\n        const lottieFilePlateauUIObject: IPlateauUIObject | undefined = await this.checkandsetLottieFile(settings);\n        if (settings.appSettings && settings.appSettings.integrationsSettings) {\n            IntegrationsHelper.arrangeIndexHtml(settings.appSettings.integrationsSettings, path.join(distFolder, \"/client/index.html\"));\n        }\n        // CopyFolder(\"./static\", \"./dist/client/static\", undefined, \n        // { distinctFileExtensions: [\".qjson\"], distinctFilesCb: this.minifyQjson, context: this }); // copies static folder. if encountered any file with \".qjson\" extension, calls minifyQjson\n\n        await this.replaceTsFilesAndSettings(distFolder, {\n            \"componentListPath\": \"/static/js/componentList.ts\",\n            \"containerServicesPath\": \"/static/js/containerServices.ts\",\n        }, settings, bundleContainer);\n\n\n        const combinedSettings = await this.combineSettings(distFolder, {\n            settings,\n            localProxy,\n        }, {\n            componentList: { type: \"object\", settingsYamlKey: \"componentListPath\" },\n            containerServices: { type: \"js\", settingsYamlKey: \"containerServicesPath\" },\n            pipeline: { format: \"qjson\", type: \"js\", settingsYamlKey: \"pipelineqjson\" },\n            alert: { format: \"qjson\", type: \"js\", settingsYamlKey: \"alertqjson\" },\n            loading: { format: \"qjson\", type: \"js\", settingsYamlKey: \"loadingqjson\" },\n            loadingLottie: { format: \"lottie\", type: \"js\", settingsYamlKey: \"loadingfile\" },\n            globalLocalization: { format: \"qjson\", type: \"js\", settingsYamlKey: \"globalLocalizationqjson\" },\n            rootqjson: { format: \"qjson\", type: \"js\", settingsYamlKey: \"rootqjson\" },\n            style: { type: \"style\", settingsYamlKey: \"cssPath\" },\n            font: { type: \"font\", settingsYamlKey: \"fontPath\" },\n            css: { type: \"style\", settingsYamlKey: \"css\" },\n            container: { type: \"js\", settingsYamlKey: \"container\" },\n        }, bundleContainer); // generates settings files.\n\n\n        var settingsWeb: ISettings = {\n            settings: combinedSettings.settings,\n            componentList: combinedSettings.componentList,\n            containerServices: combinedSettings.containerServices,\n            pipeline: combinedSettings.pipeline,\n            alert: combinedSettings.alert,\n            loading: lottieFilePlateauUIObject || combinedSettings.loading,\n            globalLocalization: combinedSettings.globalLocalization,\n            rootqjson: combinedSettings.rootqjson,\n            localProxy: combinedSettings.localProxy,\n            style: combinedSettings.style,\n            container: combinedSettings.container,\n        };\n\n\n        let fileBody =\n            \"var assetObj = \"\n            + JSON.stringify(assetList, null, '\\t')\n            + \"\\nif (typeof exports === 'object' && typeof module === 'object'){\\n \\tmodule.exports = assetObj;\\n}else{ \\n\\twindow['plateauUIAsset'] = assetObj;\\n}\";\n        await fsPromises.writeFile(path.join(distFolder, \"./client\", \"/static/css/assetList.js\"), fileBody, { encoding: (\"utf-8\" as BufferEncoding) });\n\n        let concattedYamlStringWeb =\n            \"var settings = \"\n            + JSON.stringify(settingsWeb, null, '\\t')\n            + \"\\nif (typeof exports === 'object' && typeof module === 'object'){\\n \\tmodule.exports = settings;\\n}else{ \\n\\twindow['plateauUISettings'] = settings;\\n}\";\n        await fsPromises.writeFile(path.join(distFolder, \"./client\", \"/settings/settings_web.js\"), concattedYamlStringWeb, { encoding: (\"utf-8\" as BufferEncoding) });\n\n\n        var settingsIAM: ISettingsIAM = { iam: settings.backendInf?.iam, iamV2: settings.iamV2 };\n        let concattedYamlStringIAM =\n            \"const plateauUIIAMOptions = \"\n            + JSON.stringify(settingsIAM, null, '\\t')\n            + \"\\nif (typeof exports === 'object' && typeof module === 'object'){\\n \\tmodule.exports = plateauUIIAMOptions;\\n}else{ \\n\\twindow['plateauUIIAMOptions'] = plateauUIIAMOptions;\\n}\";\n        await fsPromises.writeFile(path.join(distFolder, \"./client\", \"/settings/settings_iam.js\"), concattedYamlStringIAM, { encoding: (\"utf-8\" as BufferEncoding) });\n\n        let mobileCss: IPlateauUIObject = { value: \"\", type: \"style\" };\n        const concatenatedValues: Set<string> = new Set();\n        const style = combinedSettings.style?.value;\n        for (const themeKey of Object.keys(style)) {\n            const theme = style[themeKey];\n            if (themeKey.includes(\"css\")) {\n                concatenatedValues.add(theme.value + \" \\r\\n\");\n            }\n            else {\n                for (const cssFileKey of Object.keys(theme)) {\n                    const cssFile = theme[cssFileKey];\n                    concatenatedValues.add(cssFile.value + \" \\r\\n\");\n                }\n            }\n\n        }\n        const resultString: string = Array.from(concatenatedValues).join(\" \");\n        mobileCss.value = resultString;\n\n        var settingsMobile: ISettings = {\n            settings: combinedSettings.settings,\n            pipeline: combinedSettings.pipeline,\n            alert: combinedSettings.alert,\n            loading: combinedSettings.loadingLottie ?? combinedSettings.loading,\n            globalLocalization: combinedSettings.globalLocalization,\n            rootqjson: combinedSettings.rootqjson,\n            css: mobileCss,\n            container: combinedSettings.container,\n        };\n        const iamV2PlateauObject = { type: \"object\", value: settings.iamV2 };\n        const assetListPlateauObject = { type: \"object\", value: assetList };\n        let concattedYamlStringMobile = JSON.stringify({ ...settingsMobile, iamV2: iamV2PlateauObject, assetList: assetListPlateauObject }, null, '\\t');\n        await fsPromises.writeFile(path.join(distFolder, \"./client\", \"/settings/settings_mobile.json\"), concattedYamlStringMobile, { encoding: (\"utf-8\" as BufferEncoding) });\n\n        var infoFile: IInfo = {\n            buildTime: new Date().toISOString(),\n        };\n        let concattedYamlStringInfo = JSON.stringify(infoFile, null, '\\t');\n        await fsPromises.writeFile(path.join(distFolder, \"./client\", \"/info.json\"), concattedYamlStringInfo, { encoding: (\"utf-8\" as BufferEncoding) });\n    }\n\n\n    private async replaceTsFilesAndSettings(distFolder: string, paths: Record<string, string>, settings: Record<string, any>, container: IBundleContainer) {\n        const obj: Record<string, (fileData: IFileData) => Promise<IFileData>> = {\n            componentListPath: async (fileData) => {\n                const retVal: IFileData = { fileName: fileData.fileName.replace(\".ts\", \".js\"), fileBody: fileData.fileBody };\n\n                let fileBody = StringHelper.substringBetween(fileData.fileBody, \"//#region JS Section\");\n                retVal.fileBody = retVal.fileBody.replace('window[\"QEditorComponentOptions\"]', 'window[\"plateauUIComponentOptions\"]'); // for old versions of qui \n                if (!fileBody) { return retVal; }\n\n                retVal.fileBody = fileBody.replace(\": ComponentOptions =\", \" =\");\n                return retVal;\n            },\n            containerServicesPath: async (fileData) => {\n                const retVal: IFileData = { fileName: fileData.fileName.replace(\".ts\", \".js\"), fileBody: fileData.fileBody };\n                let fileBody = StringHelper.substringBetween(fileData.fileBody, \"//#region JS Section\");\n                if (!fileBody) { return retVal; }\n                retVal.fileBody = fileBody;\n                return retVal;\n            },\n        }\n        const proms = Object.keys(paths).map(async pathKey => {\n            const fileName = settings[pathKey] || paths[pathKey];\n\n            const oldFileName = path.join(distFolder, \"/client\", fileName);\n            const fileBody = await tryGetContents(oldFileName);\n            if (!fileBody) { return; }\n\n            const newFileData = await obj[pathKey]({ fileBody, fileName });\n            await fsPromises.writeFile(path.join(distFolder, \"/client\", newFileData.fileName), newFileData.fileBody, { encoding: (\"utf-8\" as BufferEncoding) });\n            await fsPromises.unlink(oldFileName);\n            settings[pathKey] = newFileData.fileName;\n        });\n\n        await Promise.all(proms);\n    }\n    private async tryGetCssFontContent(distFolder: string, itemValueInSettingsYaml: string | Array<string> | Record<string, Array<string>>, result: Record<string, any>, contentType: string) {\n        result = result || {};\n        if (itemValueInSettingsYaml) {\n            if (typeof itemValueInSettingsYaml != \"string\") {\n                if (Array.isArray(itemValueInSettingsYaml)) {\n                    for (const item of itemValueInSettingsYaml) {\n                        await this.tryGetCssFontContent(distFolder, item, result, contentType);\n                    }\n                } else if (Object.keys(itemValueInSettingsYaml).length > 0) {\n                    for (const key of Object.keys(itemValueInSettingsYaml)) {\n                        await this.tryGetCssFontContent(\n                            distFolder,\n                            itemValueInSettingsYaml[key],\n                            result[key] = {},\n                            contentType\n                        );\n                    }\n                }\n            } else {\n                let basePath = path.join(distFolder, \"/client\", itemValueInSettingsYaml as string);\n                let itemContent = await tryGetContents(basePath);\n                let subString = basePath.includes(\"/\") ? \"/\" : \"\\\\\";\n                let fileName = basePath.substring(basePath.lastIndexOf(subString) + 1);\n                result[fileName] = itemContent ? { value: itemContent, type: \"object\" } : { value: itemValueInSettingsYaml, type: \"path\" };\n            }\n        }\n    }\n\n    private async combineSettings(distFolder: string, items: { settings: Record<string, any>, localProxy: object | undefined }, plateauUIObjectConfigs: Record<keyof SettingsWithPath, IPlateauUIObjectConfig>, container: IBundleContainer) {\n        var settingsTotal: ISettings = {\n            settings: { value: items.settings, type: \"object\" },\n            localProxy: items.localProxy ? { value: items.localProxy, type: \"object\" } : undefined\n        };\n\n        const proms = objectKeys(plateauUIObjectConfigs).filter(key => plateauUIObjectConfigs[key].type != \"style\" && plateauUIObjectConfigs[key].type != \"font\").map(async key => {\n            const itemConfig = plateauUIObjectConfigs[key];\n            const itemPath = items.settings[itemConfig.settingsYamlKey] ?? items.settings[itemConfig.settingsYamlKey.toLocaleLowerCase(\"tr\")];\n            if (!itemPath) {\n                console.log(`${key} settings does not exist, skipping`);\n                return;\n            }\n            console.log(`checking ${key} file`);\n            let itemContent = await tryGetContents(path.join(distFolder, \"/client\", itemPath));\n            if (!itemContent) {\n                console.log(`${key} file does not exist, skipping`);\n                settingsTotal[key] = { type: \"path\", value: itemPath, format: itemConfig.format };\n                return;\n            }\n            // if (key == \"lottieanimation\"){\n            //     const lottieJsonObj = JSON.parse(itemContent);\n            //     for (let item of lottieJsonObj.pJSON){\n            //         item.P.source.H = lottieContent\n            //     }\n            //     for (let item of lottieJsonObj.cJSON){\n            //         item.P.source.H = lottieContent\n            //     }\n            //     itemContent = JSON.stringify(lottieJsonObj,null,2);\n            //     return;\n            // }\n            console.log(`${key} file exist`);\n\n\n            switch (itemConfig.type) {\n                default: throw new Error(\"unexpected type: \" + itemConfig.type);\n                case \"js\":\n                    const objRef = settingsTotal[key] = { type: itemConfig.type, value: itemContent } as IPlateauUIObject;\n                    if (itemConfig.format == \"qjson\") {\n                        objRef.value = new QJsonParser().minifyQjson(objRef.value, items.settings.keepSourceMappingURL);\n                        objRef.format = \"qjson\";\n                    }\n                    if (itemConfig.format) { objRef.format = itemConfig.format; }\n                    break;\n                case \"object\":\n                    var module: any = {};\n                    var exports = {};\n                    (new Function(\"module\", \"exports\", itemContent)(module, exports));\n                    settingsTotal[key] = { value: module?.exports, type: \"object\" };\n                    break;\n            }\n        });\n        await Promise.all(proms);\n\n        //do not include css above because structure is different. (composition over inheritance :))\n        let cssDict = {};\n        await this.tryGetCssFontContent(distFolder, items.settings[plateauUIObjectConfigs.style.settingsYamlKey] ?? items.settings[plateauUIObjectConfigs.style.settingsYamlKey.toLocaleLowerCase(\"tr\")], cssDict, 'style');\n        settingsTotal[\"style\"] = { value: cssDict, type: \"object\" };\n        let fontDict = {};\n        await this.tryGetCssFontContent(distFolder, items.settings[plateauUIObjectConfigs.font.settingsYamlKey] ?? items.settings[plateauUIObjectConfigs.font.settingsYamlKey.toLocaleLowerCase(\"tr\")], fontDict, 'font');\n        settingsTotal[\"font\"] = { value: fontDict, type: \"object\" };\n        return settingsTotal;\n    }\n\n    private async checkandsetLottieFile(settings: Record<string, any>): Promise<IPlateauUIObject | undefined> {\n        const QAnimationQjsonFolder = \"./settings/qjsons\";\n        const QAnimationQjsonFile = \"/QAnimation.qjson\";\n\n        if (!settings.loadingfile) {\n            console.log(\"Lottie File is not provided!\");\n            return;\n        }\n        let lottiePath = settings.loadingfile;\n        let loadingFileContent = QAnimationTemplate.qanimationGenerator(lottiePath);\n        settings.loadingqjson = path.join(QAnimationQjsonFolder, QAnimationQjsonFile); //TODO: gerekyok silinebilir.\n        return { format: \"qjson\", type: \"js\", value: loadingFileContent };\n    }\n}\n\n\n\ntype SettingsWithPath = Omit<Omit<ISettings, \"settings\">, \"localProxy\">;\ninterface IPlateauUIObjectConfig extends Omit<IPlateauUIObject, \"value\"> {\n    settingsYamlKey: string;\n};\n\ninterface IFileData {\n    fileName: string,\n    fileBody: string,\n};"]}