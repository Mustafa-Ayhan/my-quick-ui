{"version":3,"file":"eventBus.js","sourceRoot":"","sources":["../../src/helpers/eventBus.ts"],"names":[],"mappings":";;;AAAA,+BAA8B;AAG9B;IAII;QACI,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;IACvB,CAAC;IAEO,iCAAc,GAAtB,UAAuB,SAAiB;QACpC,OAAO,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,GAAG,IAAI,WAAI,CAAC,WAAW,GAAG,SAAS,CAAC,CAAC,CAAC;IACtG,CAAC;IAEM,4BAAS,GAAhB,UAAiB,SAAiB,EAAE,EAAa;QAC7C,IAAI,SAAS,IAAI,QAAQ,CAAC,SAAS,EAAE;YAAE,MAAM,IAAI,KAAK,CAAI,SAAS,kFAA+E,CAAC,CAAC;SAAE;QAEtJ,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;IACjD,CAAC;IACM,8BAAW,GAAlB,UAAmB,SAAiB,EAAE,EAAa;;QAC/C,IAAI,SAAS,IAAI,QAAQ,CAAC,SAAS,EAAE;YAAE,MAAM,IAAI,KAAK,CAAI,SAAS,kFAA+E,CAAC,CAAC;SAAE;QAEtJ,MAAA,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,0CAAE,WAAW,CAAC,EAAE,CAAC,CAAC;IAC9C,CAAC;IACM,+BAAY,GAAnB,UAAoB,EAAa;QAC7B,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;IAC1D,CAAC;IAEM,iCAAc,GAArB,UAAsB,EAAa;;QAC/B,MAAA,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,SAAS,CAAC,0CAAE,WAAW,CAAC,EAAE,CAAC,CAAC;IACvD,CAAC;IACM,0BAAO,GAAd,UAAe,SAAiB;QAAE,gBAAc;aAAd,UAAc,EAAd,qBAAc,EAAd,IAAc;YAAd,+BAAc;;QAC5C,IAAM,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;QACxD,aAAa,aAAb,aAAa,uBAAb,aAAa,CAAE,SAAS,CAAC,KAAK,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;QAEtD,IAAI,SAAS,IAAI,QAAQ,CAAC,SAAS,EAAE;YAAE,OAAO;SAAE;QAEhD,IAAM,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;QACtC,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,SAAS,CAAC,KAAK,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;IACxC,CAAC;IACM,qCAAkB,GAAzB;QAA0B,gBAAc;aAAd,UAAc,EAAd,qBAAc,EAAd,IAAc;YAAd,2BAAc;;QACpC,IAAM,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;QACxD,aAAa,aAAb,aAAa,uBAAb,aAAa,CAAE,SAAS,CAAC,KAAK,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;IAC1D,CAAC;IAEM,0BAAO,GAAd;QACI,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;IACvB,CAAC;IA5Cc,kBAAS,GAAG,WAAW,CAAC;IA6C3C,eAAC;CAAA,AA9CD,IA8CC;AA9CY,4BAAQ","sourcesContent":["import { Hook } from \"./hook\";\n\ntype triggerCb = (...params: any) => (void | Promise<void>);\nexport class EventBus {\n    private static AllEvents = \"AllEvents\";\n\n    private subsDict: Record<string, Hook<triggerCb> | undefined>;\n    constructor() {\n        this.subsDict = {};\n    }\n\n    private obtainSubsList(eventName: string) {\n        return this.subsDict[eventName] || (this.subsDict[eventName] = new Hook(\"EventBus_\" + eventName));\n    }\n\n    public Subscribe(eventName: string, cb: triggerCb) {\n        if (eventName == EventBus.AllEvents) { throw new Error(`${eventName} is a registered key. If you want to subscribe all events, use SubsribeAll().`); }\n\n        this.obtainSubsList(eventName).subscribe(cb);\n    }\n    public Unsubscribe(eventName: string, cb: triggerCb) {\n        if (eventName == EventBus.AllEvents) { throw new Error(`${eventName} is a registered key. If you want to subscribe all events, use SubsribeAll().`); }\n\n        this.subsDict[eventName]?.unsubscribe(cb);\n    }\n    public SubscribeAll(cb: triggerCb) {\n        this.obtainSubsList(EventBus.AllEvents).subscribe(cb);\n    }\n\n    public UnsubscribeAll(cb: triggerCb) {\n        this.subsDict[EventBus.AllEvents]?.unsubscribe(cb);\n    }\n    public Trigger(eventName: string, ...params: any) {\n        const allEventsHook = this.subsDict[EventBus.AllEvents];\n        allEventsHook?.triggerer.apply(allEventsHook, params);\n\n        if (eventName == EventBus.AllEvents) { return; }\n\n        const hook = this.subsDict[eventName];\n        hook?.triggerer.apply(hook, params);\n    }\n    public TriggerJustAllSubs(...params: any){\n        const allEventsHook = this.subsDict[EventBus.AllEvents];\n        allEventsHook?.triggerer.apply(allEventsHook, params);\n    }\n\n    public destroy() {\n        this.subsDict = {};\n    }\n}"]}