import { ILogItem, LogLevel } from "../logger";
import { ISocket } from "./iSocket";
export declare enum ReconnectType {
    BackOff = 0,
    Urgent = 1
}
export declare enum ConnectReason {
    ConnectCall = 0,
    SendReconnect = 1,
    ErrorReconnect = 2,
    CloseReconnect = 3
}
interface IReconnectOptions {
    intervalMs: number;
    type: ReconnectType;
}
export interface IDomSocketOptions {
    reConnect?: IReconnectOptions;
    logCallBack?: (logItem: ILogItem) => void;
    onMessage?: (message: any) => void;
    onConnect?: (reason: ConnectReason) => void;
    onSocketStatus?: (status: DomSocketStatus) => void;
    minLogLevel?: LogLevel;
}
export declare enum DomSocketStatus {
    Initial = 0,
    Disconnected = 1,
    WaitingToConnect = 2,
    Connecting = 3,
    Connected = 4
}
export declare class DomSocket implements ISocket {
    private static CodeAndReasons;
    private ws?;
    private options;
    private url;
    private id;
    private seqErrCount;
    private reconnectTryCount;
    private timerID?;
    private msgSenderList;
    private _status;
    get status(): DomSocketStatus;
    set status(value: DomSocketStatus);
    constructor(url: string, options?: IDomSocketOptions);
    destroy(): void;
    set OnConnect(cb: (reason: ConnectReason) => void);
    set OnMessage(cb: (message: any) => void);
    set ReConnect(option: IReconnectOptions);
    set MinLogLevel(minLogLevel: LogLevel);
    get Status(): DomSocketStatus;
    set onSocketStatus(cb: (status: DomSocketStatus) => void);
    Send(message: object | string): Promise<boolean | string>;
    /**
     *
     * @param code 4200-4300. -> https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent#Status_codes
     * @param reason
     */
    Close(code?: number, reason?: string): void;
    Connect(): this;
    private log;
    private reConnect;
    private connect;
    private onSocketError;
    private calculateReconnectInterval;
    private onSocketOpen;
    private onSocketClose;
    private onSocketMessage;
}
export {};
//# sourceMappingURL=domSocket.d.ts.map