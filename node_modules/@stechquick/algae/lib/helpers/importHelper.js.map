{"version":3,"file":"importHelper.js","sourceRoot":"","sources":["../../src/helpers/importHelper.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,yDAAwD;AAExD,SAAsB,YAAY,CAAI,IAAY,EAAE,iBAAyB,EAAE,WAAqC,EAAE,UAAgB;IAAvD,4BAAA,EAAA,uBAAqC;;;;;;oBAC/G,MAAc,CAAC,uBAAuB,GAAG,UAAU,CAAC;oBAC/C,IAAI,GAAG,IAAA,qCAAiB,GAAQ,CAAC;oBACjC,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;oBAChD,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC;oBAClB,MAAM,CAAC,MAAM,GAAG,cAAM,OAAA,IAAI,CAAC,QAAQ,EAAE,EAAf,CAAe,CAAC;oBACtC,MAAM,CAAC,OAAO,GAAG;wBAAC,cAAO;6BAAP,UAAO,EAAP,qBAAO,EAAP,IAAO;4BAAP,yBAAO;;wBAAM,OAAQ,MAAc,CAAC,uBAAuB,CAAC;wBAAC,IAAI,CAAC,MAAM,cAAM,IAAI,EAAG,CAAC;oBAAA,CAAC,CAAC;oBAC1G,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;oBAClC,qBAAM,IAAI,CAAC,OAAO,EAAA;;oBAAlB,SAAkB,CAAC;oBACnB,OAAQ,MAAc,CAAC,uBAAuB,CAAC;oBACzC,MAAM,GAAI,MAAc,CAAC,iBAAiB,CAAC,CAAC;oBAClD,IAAI;wBACA,OAAQ,MAAc,CAAC,iBAAiB,CAAC,CAAC;qBAC7C;oBAAC,OAAO,KAAK,EAAE,EAAE,6HAA6H;qBAC9I;oBAED,sBAAO,CAAC,WAAW,IAAI,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,WAAW,CAAC,CAAM,EAAC;;;;CACnE;AAjBD,oCAiBC;AAED,SAAsB,YAAY,CAAI,IAAiB,EAAE,OAA8B,EAAE,WAA+B,EAAE,UAAgB;IAAjD,4BAAA,EAAA,uBAA+B;;;;;wBACrG,qBAAM,gBAAgB,CAAC,IAAI,CAAC,EAAA;;oBAArC,MAAM,GAAG,SAA4B;oBAC3C,sBAAO,gBAAgB,CAAI,MAAM,EAAE,OAAO,EAAE,WAAW,EAAE,UAAU,CAAC,EAAC;;;;CACxE;AAHD,oCAGC;AACD,SAAsB,gBAAgB,CAAC,IAAiB;;;;;wBACrC,qBAAM,KAAK,CAAC,IAAI,CAAC,EAAA;;oBAA1B,MAAM,GAAG,SAAiB;oBACzB,qBAAM,MAAM,CAAC,IAAI,EAAE,EAAA;wBAA1B,sBAAO,SAAmB,EAAC;;;;CAC9B;AAHD,4CAGC;AACD,SAAgB,gBAAgB,CAAI,QAAgB,EAAE,OAA8B,EAAE,WAAqC,EAAE,UAAgB;IAAvD,4BAAA,EAAA,uBAAqC;IACvH,IAAM,MAAM,GAAG,EAAS,EAAE,OAAO,GAAG,EAAE,CAAC;IACvC,IAAI,QAAQ,CAAC,QAAQ,EAAE,SAAS,EAAE,SAAS,EAAE,QAAQ,EAAE,yBAAyB,EAAE,QAAQ,CAAC,CAAC,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,UAAU,EAAE,UAAU,CAAC,CAAC;IAE9I,OAAO,CAAC,WAAW,IAAI,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,CAAM,CAAC;AACpF,CAAC;AALD,4CAKC","sourcesContent":["import { CreatePromiseData } from \"./createPromiseData\";\n\nexport async function importScript<T>(path: string, windowLibraryName: string, importField: string | \"*\" = \"default\", parameters?: any) {\n    (window as any).__tempPlateauUIParams__ = parameters;\n    const prom = CreatePromiseData<void>();\n    const script = document.createElement(\"script\");\n    script.src = path;\n    script.onload = () => prom.resolver();\n    script.onerror = (...args) => {delete (window as any).__tempPlateauUIParams__; prom.reject({ ...args });};\n    document.body.appendChild(script);\n    await prom.promise;\n    delete (window as any).__tempPlateauUIParams__;\n    const module = (window as any)[windowLibraryName];\n    try {\n        delete (window as any)[windowLibraryName];\n    } catch (error) { // throws \"Cannot delete property of #<Window>\", some declared properties are mounted on the window and are non-configurable.\n    }\n\n    return (importField == \"*\" ? module : module[importField]) as T;\n}\n\nexport async function importModule<T>(path: RequestInfo, require: (name: string) => any, importField: string = \"default\", parameters?: any) {\n    const compjs = await importModuleFile(path);\n    return importModuleBody<T>(compjs, require, importField, parameters);\n}\nexport async function importModuleFile(path: RequestInfo) {\n    const result = await fetch(path);\n    return await result.text();\n}\nexport function importModuleBody<T>(moduleJs: string, require: (name: string) => any, importField: string | \"*\" = \"default\", parameters?: any) {\n    const module = {} as any, exports = {};\n    new Function(\"module\", \"exports\", \"require\", \"params\", \"__tempPlateauUIParams__\", moduleJs)(module, exports, require, parameters, parameters);\n\n    return (importField == \"*\" ? module.exports : module.exports[importField]) as T;\n}"]}