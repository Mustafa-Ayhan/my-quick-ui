{"version":3,"file":"integrationsHelper.js","sourceRoot":"","sources":["../../src/helpers/integrationsHelper.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,2CAAmD;AAEnD;IAAA;IA6BA,CAAC;IA5BuB,mCAAgB,GAApC,UAAqC,mBAA0C,EAAE,QAAgB;;;;;4BACtE,qBAAM,IAAA,qBAAQ,EAAC,QAAQ,CAAC,EAAA;;wBAA3C,gBAAgB,GAAG,SAAwB;wBACzC,kBAAkB,GAAG,mBAAmB,CAAC,kBAAkB,CAAC;wBAE5D,oBAAoB,GAAG,UAAC,GAAW,EAAE,IAAY;4BACnD,IAAM,WAAW,GAAG,gBAAgB,CAAC,OAAO,CAAC,MAAI,GAAG,MAAG,CAAC,CAAC;4BACzD,IAAI,WAAW,KAAK,CAAC,CAAC,IAAI,IAAI,EAAE;gCAC5B,IAAM,cAAc,GAAG,WAAW,GAAG,CAAA,MAAI,GAAG,MAAG,CAAA,CAAC,MAAM,CAAC;gCACvD,IAAM,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,UAAA,IAAI,IAAI,OAAA,OAAK,IAAM,EAAX,CAAW,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gCAC1E,gBAAgB,GAAG,gBAAgB,CAAC,KAAK,CAAC,CAAC,EAAE,cAAc,CAAC,GAAG,IAAI,GAAG,YAAY,GAAG,gBAAgB,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;6BAC/H;wBACL,CAAC,CAAC;wBAEF,kBAAkB,CAAC,OAAO,CAAC,UAAC,WAAmC;4BAC3D,IAAI,CAAC,WAAW,CAAC,WAAW;gCAAE,OAAO;4BACrC,IAAM,gBAAgB,GAAG;gCACrB,EAAE,IAAI,EAAE,WAAW,CAAC,QAAQ,EAAE,QAAQ,EAAE,MAAM,EAAE;gCAChD,EAAE,IAAI,EAAE,WAAW,CAAC,QAAQ,EAAE,QAAQ,EAAE,MAAM,EAAE;gCAChD,EAAE,IAAI,EAAE,WAAW,CAAC,UAAU,EAAE,QAAQ,EAAE,QAAQ,EAAE;6BACvD,CAAC;4BACF,gBAAgB,CAAC,OAAO,CAAC,UAAA,IAAI;gCACzB,IAAI,CAAC,IAAI,CAAC,IAAI;oCAAE,OAAO;gCACvB,oBAAoB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;4BACnD,CAAC,CAAC,CAAC;wBACP,CAAC,CAAC,CAAC;wBAEH,qBAAM,IAAA,sBAAS,EAAC,QAAQ,EAAE,gBAAgB,CAAC,EAAA;;wBAA3C,SAA2C,CAAC;;;;;KAC/C;IACL,yBAAC;AAAD,CAAC,AA7BD,IA6BC;AA7BY,gDAAkB","sourcesContent":["import { IIntegrationsSettings, ICustomIntegrationItem } from \"../quick/IntegrationSettings\";\nimport { readFile, writeFile } from \"./fileHelper\";\n\nexport class IntegrationsHelper {\n    public static async arrangeIndexHtml(integrationSettings: IIntegrationsSettings, filePath: string) {\n        let indexHtmlContent = await readFile(filePath);\n        const customIntegrations = integrationSettings.customIntegrations;\n\n        const insertCodeAtPosition = (tag: string, code: string) => {\n            const tagPosition = indexHtmlContent.indexOf(`<${tag}>`);\n            if (tagPosition !== -1 && code) {\n                const insertPosition = tagPosition + `<${tag}>`.length;\n                const indentedCode = code.split('\\n').map(line => `  ${line}`).join('\\n');\n                indexHtmlContent = indexHtmlContent.slice(0, insertPosition) + '\\n' + indentedCode + indexHtmlContent.slice(insertPosition);\n            }\n        };\n \n        customIntegrations.forEach((integration: ICustomIntegrationItem) => {\n            if (!integration.isActivated) return;\n            const integrationParts = [\n                { code: integration.headCode, position: 'head' },\n                { code: integration.bodyCode, position: 'body' },\n                { code: integration.footerCode, position: 'footer' }\n            ];\n            integrationParts.forEach(part => {\n                if (!part.code) return;\n                insertCodeAtPosition(part.position, part.code);\n            });\n        });\n\n        await writeFile(filePath, indexHtmlContent);\n    }\n}"]}